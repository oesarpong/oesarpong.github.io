<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Fast Robots Student Website</title>
    <meta name="description" content=" add later" />
    <meta name="author" content=" Ethan Sarpong" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
</head>
<body>
    <!-- Responsive Navbar-->
    <nav class="navbar navbar-expand-lg px-3 bg-dark sticky-top" style=" z-index: 1000; width:100%; height: 3rem;">
        <a class="navbar-brand text-white"> <p class="h4"> <span class="fw-bold "style = "color:tomato;"> MAE 4190 </span> Fast Robots</p> </a>
    </nav>
    <!-- Main Grid Layout -->
    <div class="container-xs px-3 my-3 ">
        <div class="row">
            <!-- Side Column -- About Me + Navigation -->
            <div class="col-12 col-md-3 text-md-center px-4">
                <div class="overflow-y-auto container-md bg-white" style= "max-height: 100%;">
                    <header class ="container d-md-none">  
                        <a><h1 class="text-capitalize"><span class="fw-bold" style="color:tomato;">Welcome!</span></h1>
                        <div class="w-100"></div> <h3 class="fw-bold text-dark text-wrap text-justify"> Student Fast Robots Course Webpage</h3></a>
                    </header>
                    <!-- About Card-->
                    <div class="shadow bg-dark-subtle mx-1 rounded">
                        <div class="card bg-dark py-3 px-3 mx-0 mt-3 align-items-center text-light ">
                            <img src="assets/profile.jpg" class= "img-fluid d-none d-md-block rounded-circle " alt="..."  style = "width: 75%; height: 75%;">
                            <img src="assets/profile.jpg" class= "img-fluid d-md-none rounded-circle " alt="..."  style = "width: 50%; height: 50%;">
                            <h3 class="card-title fw-bolder text-center my-2 px-3"> Ethan Sarpong</h3>
                            <h6 class="card-title text-center px-3" style="color: rgb(173, 173, 173);"> Mechanical Engineer | eos29</h6>
                            <ul class="nav nav-underline">
                                <li class="nav-item justify-content-center">
                                    <div class="d-flex flex-column align-items-center">
                                        <button class="btn px-5 btn-outline-light my-1 fw-medium" type="button" onclick="window.location.href='index.html';">
                                            Homepage
                                        </button>       
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab1.html';">
                                            Lab 1: Artemis & Bluetooth
                                        </button> 
                                        <button class="btn px-4 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab2.html';">
                                            Lab 2: IMU Sensor
                                        </button> 
                                        <button class="btn px-4 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab3.html';">
                                            Lab 3: ToF Sensor
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab4.html';">
                                            Lab 4: Motors and Open Loop Control
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab5.html';">
                                            Lab 5: PID Control/Interpolation
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab6.html';">
                                            Lab 6: Orientation Control
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab7.html';">
                                            Lab 7: Kalman Filtering
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab8.html';">
                                            Lab 8: Stunts
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab9.html';">
                                            Lab 9: Mapping
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab10.html';">
                                            Lab 10: Grid Localization I
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab11.html';">
                                            Lab 11: Grid Localization II
                                        </button> 
                                        <button class="btn px-2 my-1 mx-3 btn-outline-light fw-medium" type="button" onclick="window.location.href='lab12.html';">
                                            Lab 12: Planning & Execution
                                        </button> 
                                    </div>
                                </li>
                            </ul>
                            <footer class="pt-1 pb-2 my-3">
                                <div class="container">
                                    <h3 class=""><span class="fw-bold" style="color:tomato;">Contact Information<span></h3>
                                    <p class="fw-medium">Email: <span class="fw-light">eos29@cornell.edu</span></p>
                                    <p class="fw-medium lh-1">LinkedIn: <small><a class="link-opacity-10-hover" href="https://www.linkedin.com/in/ethan-sarpon/">https://www.linkedin.com/in/ethan-sarpon/</a></small></p>
                                </div> 
                            </footer> 
                        </div>
                    </div>
                </div>
            </div>  
            <!-- Main Column -- Page Content -->
            <div class="col-12 col-md-9 bg-white overflow-y-scroll px-5 " style="height: 155vh;">
                <div class="d-flex flex-column ms-2 text-darkt">
                    <h1 class="text-capitalize fw-bolder mt-3">
                        <span class="fw-bolder" style="color:tomato; font-size: clamp(2.5rem, 2vw, 2.5rem);">Lab 12: Planning and Execution</span>
                    </h1>
                    <h2 class="fw-bolder mt-2">Introduction</h2> <hr style="margin-top: 0;">
                    <p class="fw-light">
                        The purpose of this lab is to have the robot navigate through a set of waypoints in the map as quickly and accurately as possible. This lab was intentionally left open ended, encouraging us
                        to put together what we have learned in the different lab. 
                    </p>
                    <h2 class="fw-bolder mt-2">Path Planning</h2> <hr style="margin-top: 0;">
                    <p class="fw-light">
                        For this lab, we were tasked to navigate through the same map that we have been using for the last several laps to conduct planning and localization. Successful navigation around this environment will be quantified by the robot's 
                        ability to reach the following waypoints. 
                    </p>
                    <div class="row">
                        <div class="col-md-6 col-12">
                            <div class="my-4 px-5 mx-5 align-self-center" style="border: 1px solid rgb(41, 40, 40); padding: 10px;">
                                <script src="https://gist.github.com/oesarpong/7ac217ad5acca64ada2b712bb751e6de.js"></script>
                            </div>
                        </div>
                        <div class="col-md-6 col-12">
                            <div class="d-flex justify-content-center my-3">
                                <img class="img-fluid align-self-center" src="assets/lab12/og_waypoints.png" alt="...">
                            </div>
                        </div>
                    </div>
                    <p class="fw-light">
                        Assuming everything we have learned in class is at my disposal, I first began by breaking down the robots decisions and actions into a series of repetable steps and evaluations. 
                    </p>
                    <h4 class="fw-bolder mt-4">Step-By-Step</h5> <hr style="margin-top: 0;">
                    <ol class="list-group px-5">
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                          <div class="ms-2 me-auto py-2">
                            <div class="fw-bold">Step 1: What is My Current Pose? (<span class="fw-medium" style="color: tomato;">Mapping Controller</span>)</div>
                            <ul class="list-unstyled ms-2 fw-light">
                                <li> <span class="fw-medium">1.1:</span> What is an Acceptable Accuracy Between my Belief and Expectation </li>
                            </ul>
                          </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                          <div class="ms-2 me-auto">
                            <div class="fw-bold">Step 2: What is My Pose Relative to the Next Way Point?</div>
                            <ul class="list-unstyled ms-2 fw-light">
                                <li> <span class="fw-medium">2.1:</span> Calculate Displacement </li>
                                <li> <span class="fw-medium">2.2:</span> Calculate Rotation </li>
                            </ul>
                          </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                              <div class="fw-bold">Step 3: Point Towards Next Point (<span class="fw-medium" style="color: tomato;">Orientation Controller</span>)</div>
                            </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                              <div class="fw-bold">Step 4: Move Towards Next Point (<span class="fw-medium" style="color: tomato;">Positional Controller</span>)</div>
                            </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                              <div class="fw-bold">Step 5: Is there another WayPoint?</div>
                              <ul class="list-unstyled ms-2 fw-light">
                                  <li> <span class="fw-medium">Yes:</span> Go to Step 1</li>
                                  <li class="ms-5"> <span class="fw-medium">5.1</span> Rotate to Zero for Mapping</li>
                                  <li> <span class="fw-medium">No:</span> Stop </li>
                              </ul>
                            </div>
                        </li>
                    </ol>
                    <h4 class="fw-bolder mt-4">Type of Execution</h5> <hr style="margin-top: 0;">
                    <p class="fw-light">
                    Now with an approach for execution, I decided to further divide these steps between the Artemis in Ardunio and my Laptop in Python. 
                    The biggest draw back for placing everything on the Artemis is going to be the limited memory capacity. In the case that I used localization in order to calculate the belief, I reasoned it was best
                    to keep the calculations and conditional evlautions within Python, and limit the Artemis to receiving command to implement controllers. 
                    </p>
                    <p class="fw-light text-center">
                    <span class="fw-medium">Laptop/Python:</span> Step 1 (belief), Step 2, and Step 5 
                    </p>
                    <p class="fw-light text-center">
                    <span class="fw-medium">Artemis/Arduino:</span> Step 1 (Mapping), Step 3, and Step 4 
                    </p>
                    <h4 class="fw-bolder mt-4">Discussion on Controllers</h5> <hr style="margin-top: 0;">
                    <p class="fw-light">
                        For this lab, I will be using the same controllers which I developed in the previous. Please refer to theses respetive labs for documentation on the algorithims for the Mapping, Orientation, and Positonal Controller.
                        With this in mind, I will only be reporting on the Gain Values used for the respective controllers. 
                    </p>
                    <p class="fw-light">
                        Additionally, it important to note that the both the Mapping Controller and Positional Controller utilize the ToF sensors but at different Timing Budgets. For this lab, I will be toggling between the the following two settings depending on the need for 
                        accruacy or a higher frequency of readings. 
                    </p>
                    <p class="fw-light text-center">
                        <span class="fw-medium">Accuracy:</span> Timing Budget/200ms
                    </p>
                    <p class="fw-light text-center">
                        <span class="fw-medium">Frequency:</span> Timing Budget/50ms
                    </p>
                    <h2 class="fw-bolder mt-5">Execution</h2> <hr style="margin-top: 0;">
                    <p class="fw-light">Below is a summary of the different methods used to execute the planned path</p>
                    <h4 class="fw-bolder mt-4">Open Loop</h4> <hr style="margin-top: 0;">
                    <div class="container-fluid px-5">
                        <h5 class="fw-bolder mt-2">Plan Simplification</h5> <hr style="margin-top: 0;">
                        <p class="fw-light">
                            The first method of exectution, I decided to go with was an open loops set of commands sent to the Artemis. The nature of this method allows us to simplify the steps as follows.
                            <ul class="list-unstyled ms-5 fw-light">
                                <li class="my-2"> <span class="fw-medium">Assumed Pose.</span> By hard coding a set of commands and inputs we can eliminate the need to determine the pose by assuming we reach every waypoint. Error is acceptable.</li>
                                <li class="my-2"> <span class="fw-medium">Predetermined Displacements, Rotations.</span> All calculations are predetermined before running algorithim</li>
                                <li class="mt-2"> <span class="fw-medium">Fixed Amount of Loops.</span> Eliminates the Need to evalaute if the robot should continue or stop</li>
                            </ul>
                        </p>
                        <p class="fw-light">With this a lot of the computation is done ahead of time and the plan is condensed into Step 3 and 4 for rotating and moving forward. 
                            Additionally, the waypoints for the path were updated for improved performance of the robot. The updates include the alteration of the first displacment in order to ensure that the ToF 
                            sensors can return a valid reading with physical significanc. Below is the new route.
                        </p>
                        <div class="d-flex justify-content-center my-3">
                            <img class="img-fluid align-self-center w-50" src="assets/lab12/map1.jpg" alt="...">
                        </div>
                        <h5 class="fw-bolder mt-3">Code</h5><hr style="margin-top: 0;">
                        <div class="my-4 px-5 mx-5 align-self-center" style="border: 1px solid rgb(41, 40, 40); padding: 10px;">
                            <script src="https://gist.github.com/oesarpong/5be47326476276d821da4900c722eb07.js"></script>
                        </div>
                        <p class="fw-light">
                            Updated GET_SENSOR_DATA() command to accomdate new algothim. Returns recent sensor data from the DMP and the Tof Sensor. 
                        </p>
                        <div class="my-4 px-5 mx-5 align-self-center" style="border: 1px solid rgb(41, 40, 40); padding: 10px;">
                            <script src="https://gist.github.com/oesarpong/970e0a946bfe7e760a3ec3aba73415e0.js"></script>
                        </div>
                        <h5 class="fw-bolder mt-5">Results</h5><hr style="margin-top: 0;">
                        <p class="fw-bold my-2"> Attempt #1 </p>
                        <div class="d-flex justify-content-center my-2">
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/I1LvJ25Xi-o?si=l01mL-qBIH0hPpFh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>                        
                        </div>
                        <p class="fw-bold my-2"> Attempt #2 </p>
                        <div class="d-flex justify-content-center my-2">
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/HDGTIxg2LZs?si=xTfX7rGOVI1wJMoS" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                        </div>
                        <h5 class="fw-bolder mt-5">Discussion</h5><hr style="margin-top: 0;">
                        <p class="fw-light">
                            Using an open loop set of commands resulted in an acceptable solution. I was satisfied with my solution's ability to utilize control inputs in order to calculate the next setpoint which 
                            I believed allowed for greater adaptability in the case that there was any error or overshoot in route to the next setpoint. Additionally, my solution was able to traverse all of the 
                            setpoints reaching the end which I consider to be successful. 
                        </p>
                        <p class="fw-light">
                            The greatest limitation to this method is error propogation and a lack of repeatability. In order to get a successful run, I needed to run countless trials hoping for the perfect conditions as it pertains the charge of my battery and slip between the wheels and the ground.
                            Any of these factors had a notable effect on my results and required continous tuning in order to recreate the same performance. 
                        </p>
                        <p class="fw-light">
                            Some of the ways in which I accommodated for error was by utilizing an inertial frame of reference when creating setpoints for my orientation controller. By storing the DMP's starting orientation I was able to create setpoints relative to the 
                            this global frame which reduced some of the error propogation found from setting setpoints based on a previous pose (local). This global frame was determined by the starting positon at the beginning of entire open loop run. Additionally, adjusting the timing budget for the ToF sensors was very handy and allowed me to maximize the sensors capabilities. 
                            At the beginning of every loop I would create a reference to the nearest obstacle 
                            using a more acccurate timing budget then switch to a faster timing budget to improve the responsiveness of my controller.
                        </p>
                        <p class="fw-light">
                            In summary, I believe was the best method of implementing an open loop system while utilizing the skills learned in previous labs. 
                        </p>
                    </div>
                    <h4 class="fw-bolder mt-4">Localization</h4> <hr style="margin-top: 0;">
                    <div class="container-fluid px-5">
                        <p class="fw-light">
                            After completeing Open Loop, I decided to entertain a more refined solution to my initial Path Plan that executes every step. To do this, I decided to use the Update Step in the Bayes System to calculate the Belief based on the localization 
                            and use the belief to calculate the inputs needed to rotate and move forward to the next location.
                        </p>
                        <p class="fw-light">
                            Unfortunately, I was not able to peform and trials with this solution but would like to offer my code as an extension of the open loop algorithim. The major differences is that the displacments and rotations are no longer predeterimned but 
                            calculated depending on the returned belief. Notably, this code does not take into consideration the angular pose determined by the belief.  
                        </p>

                        <h5 class="fw-bolder mt-3">Code</h5><hr style="margin-top: 0;">                
                        <div class="my-4 px-5 mx-5 align-self-center" style="max-height: 70vh; overflow: auto; border: 1px solid rgb(41, 40, 40); padding: 10px;">
                            <script src="https://gist.github.com/oesarpong/8d73d55c3174750fcfca3ef3b1dea3d6.js"></script>
                        </div>
                    </div>
                    <h5 class="fw-bolder mt-5">General Reflection</h5><hr style="margin-top: 0;">
                    <p class="fw-light">
                        I really enjoyed this course! It provided a unique set of challenges that I found to be very profitable. I enjoyed the individual projects and the focus on implementation and high level use of different electronics and algorithims. Shout out to all the TA's for their 
                    office hours and dedicated support.                    </p>
                    



                    <h2 class="fw-bolder mt-3">References</h2> <hr style="margin-top: 0;">
                    <div class="fw-light">
                        <p>
                            <span class="fw-medium fst-italic">ChatGPT:</span> Served as valuable resource for programming in C and html. This AI did not serve to be useful for developing logic and algorithim.
                            Rather it was used for finding function documentation and aquiring knowledge for unknown built-in functions. This was useful when searching for documentation and configuration of the hardware.
                        </p>
                        <p>
                            <span class="fw-medium fst-italic">2024 Student Webpages: </span>Referenced as guides and inspiration in developing my own controller. 
                            Variety served to be useful as this was an open ended lab. Additionally, it helped troubleshoot by having accounts for similar errors.
                        </p>
                        <ul class="ms-2 list-group-flush">
                            <li class="list-group-item">1. Nila Narayan</li>
                            <li class="list-group-item">2. Mikayla Lahr</li>
                        </ul>
                    </div>
            </div> 


    <!-- Bootstrap core JS-->
        <script src="js/bootstrap.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
</body>
</html>


